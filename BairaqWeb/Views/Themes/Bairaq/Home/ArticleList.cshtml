@{
    Layout = $"~/Views/Themes/{CurrentTheme}/_HomeLayout.cshtml";
    var topArticleList = QarList<Article>("topArticleList");
    var articleList = QarList<Article>("articleList");
    var pageIndex = Convert.ToInt32(ViewData["page"] ?? 0);
    var total = Convert.ToInt32(ViewData["total"] ?? 0);
    var totalPage = Convert.ToInt32(ViewData["totalPage"] ?? 0);
    var categoryId = Convert.ToInt32(ViewData["categoryId"] ?? 0);
    var keyword = (ViewData["keyword"] ?? string.Empty) as string;
    var categoryTitle = (ViewData["categoryTitle"] ?? string.Empty) as string;
}

<main class="main">
    <div class="container article-page">
        <h3 class="page-title">@categoryTitle</h3>
        <div class="content d-flex">
            <ul class="article-list">
                @foreach (var article in articleList)
                {
                    <li>
                        <a href="/@CurrentLanguage/article/@(article.LatynUrl).html" class="d-flex">
                            <img src="@article.ThumbnailUrl.Replace("_big.", "_middle.")" alt="">
                            <div class="text">
                                <h4 class="title">@article.Title</h4>
                                <p class="description">@article.ShortDescription</p>
                                <p class="date-time count">
                                    <span class="date">@UnixTimeHelper.UnixTimeToLocalString(article.AddTime, CurrentLanguage)</span>
                                    <span class="view-count">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="10" viewBox="0 0 15 10" fill="none">
                                            <path d="M14.0138 4.90085C13.8878 4.7285 10.8858 0.680664 7.05165 0.680664C3.21752 0.680664 0.215353 4.7285 0.0894964 4.90069C-0.0298321 5.0642 -0.0298321 5.28597 0.0894964 5.44948C0.215353 5.62184 3.21752 9.66967 7.05165 9.66967C10.8858 9.66967 13.8878 5.62181 14.0138 5.44962C14.1333 5.28614 14.1333 5.0642 14.0138 4.90085ZM7.05165 8.73978C4.2274 8.73978 1.78131 6.05315 1.05721 5.17485C1.78037 4.29578 4.22134 1.61056 7.05165 1.61056C9.87576 1.61056 12.3217 4.29672 13.0461 5.17548C12.3229 6.05453 9.88196 8.73978 7.05165 8.73978Z" fill="#C0C0C0"/>
                                            <path d="M7.04975 2.83398C5.63469 2.83398 4.4834 3.98527 4.4834 5.40033C4.4834 6.81539 5.63469 7.96668 7.04975 7.96668C8.4648 7.96668 9.61609 6.81539 9.61609 5.40033C9.61609 3.98527 8.4648 2.83398 7.04975 2.83398ZM7.04975 7.11121C6.10632 7.11121 5.33886 6.34373 5.33886 5.40033C5.33886 4.45693 6.10635 3.68945 7.04975 3.68945C7.99314 3.68945 8.76063 4.45693 8.76063 5.40033C8.76063 6.34373 7.99317 7.11121 7.04975 7.11121Z" fill="#C0C0C0"/>
                                        </svg>
                                        @article.ViewCount
                                    </span>
                                </p>
                            </div>
                        </a>
                    </li>
                }
            </ul>
            <div class="most-read d-none d-md-block">
                <h5 class="most-title">@T("ls_Mostviewed")</h5>
                <ul class="most-article-list">
                    @foreach (var article in topArticleList)
                    {
                        <li>
                            <a href="">
                                <h6 class="title">@article.Title</h6>
                                <p class="date-time count">
                                    <span class="date">@UnixTimeHelper.UnixTimeToLocalString(article.AddTime, CurrentLanguage)</span>
                                    <span class="view-count">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="10" viewBox="0 0 15 10" fill="none">
                                            <path d="M14.0138 4.90085C13.8878 4.7285 10.8858 0.680664 7.05165 0.680664C3.21752 0.680664 0.215353 4.7285 0.0894964 4.90069C-0.0298321 5.0642 -0.0298321 5.28597 0.0894964 5.44948C0.215353 5.62184 3.21752 9.66967 7.05165 9.66967C10.8858 9.66967 13.8878 5.62181 14.0138 5.44962C14.1333 5.28614 14.1333 5.0642 14.0138 4.90085ZM7.05165 8.73978C4.2274 8.73978 1.78131 6.05315 1.05721 5.17485C1.78037 4.29578 4.22134 1.61056 7.05165 1.61056C9.87576 1.61056 12.3217 4.29672 13.0461 5.17548C12.3229 6.05453 9.88196 8.73978 7.05165 8.73978Z" fill="#C0C0C0"/>
                                            <path d="M7.04975 2.83398C5.63469 2.83398 4.4834 3.98527 4.4834 5.40033C4.4834 6.81539 5.63469 7.96668 7.04975 7.96668C8.4648 7.96668 9.61609 6.81539 9.61609 5.40033C9.61609 3.98527 8.4648 2.83398 7.04975 2.83398ZM7.04975 7.11121C6.10632 7.11121 5.33886 6.34373 5.33886 5.40033C5.33886 4.45693 6.10635 3.68945 7.04975 3.68945C7.99314 3.68945 8.76063 4.45693 8.76063 5.40033C8.76063 6.34373 7.99317 7.11121 7.04975 7.11121Z" fill="#C0C0C0"/>
                                        </svg>
                                        @article.ViewCount
                                    </span>
                                </p>
                            </a>
                        </li>
                    }
                </ul>
            </div>
        </div>
        <nav id="pagination" class="pagination"></nav>

        <div class="most-read d-md-none">
            <h5 class="most-title">@T("ls_Mostviewed")</h5>
            <ul class="most-article-list">
                @foreach (var article in topArticleList)
                {
                <li>
                    <a href="">
                        <h6 class="title">@article.Title</h6>
                        <p class="date-time count">
                            <span class="date">@UnixTimeHelper.UnixTimeToLocalString(article.AddTime, CurrentLanguage)</span>
                            <span class="view-count">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="10" viewBox="0 0 15 10" fill="none">
                                            <path d="M14.0138 4.90085C13.8878 4.7285 10.8858 0.680664 7.05165 0.680664C3.21752 0.680664 0.215353 4.7285 0.0894964 4.90069C-0.0298321 5.0642 -0.0298321 5.28597 0.0894964 5.44948C0.215353 5.62184 3.21752 9.66967 7.05165 9.66967C10.8858 9.66967 13.8878 5.62181 14.0138 5.44962C14.1333 5.28614 14.1333 5.0642 14.0138 4.90085ZM7.05165 8.73978C4.2274 8.73978 1.78131 6.05315 1.05721 5.17485C1.78037 4.29578 4.22134 1.61056 7.05165 1.61056C9.87576 1.61056 12.3217 4.29672 13.0461 5.17548C12.3229 6.05453 9.88196 8.73978 7.05165 8.73978Z" fill="#C0C0C0"/>
                                            <path d="M7.04975 2.83398C5.63469 2.83398 4.4834 3.98527 4.4834 5.40033C4.4834 6.81539 5.63469 7.96668 7.04975 7.96668C8.4648 7.96668 9.61609 6.81539 9.61609 5.40033C9.61609 3.98527 8.4648 2.83398 7.04975 2.83398ZM7.04975 7.11121C6.10632 7.11121 5.33886 6.34373 5.33886 5.40033C5.33886 4.45693 6.10635 3.68945 7.04975 3.68945C7.99314 3.68945 8.76063 4.45693 8.76063 5.40033C8.76063 6.34373 7.99317 7.11121 7.04975 7.11121Z" fill="#C0C0C0"/>
                                        </svg>
                                @article.ViewCount
                                    </span>
                        </p>
                    </a>
                </li>
                }
            </ul>
        </div>
    </div>
</main>

@if (totalPage > 1)
{
    var href = PagingHref(keyword, categoryId);

    @section Scripts {
        <script>
        $(function () {
            $('#pagination').pagination({
                items: @total,
                itemsOnPage: 12,
                currentPage: @pageIndex,
                prevText: `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5285 2.70388C11.2079 2.38321 10.688 2.38321 10.3673 2.70388L4.89326 8.17794C4.5726 8.4986 4.5726 9.0185 4.89326 9.33916L10.3673 14.8132C10.688 15.1339 11.2079 15.1339 11.5285 14.8132C11.8492 14.4926 11.8492 13.9727 11.5285 13.652L6.6351 8.75855L11.5285 3.8651C11.8492 3.54444 11.8492 3.02454 11.5285 2.70388Z" fill="#4E4E4E"/>
                        </svg>`,
                nextText: `<svg xmlns="http://www.w3.org/2000/svg" width="19" height="18" viewBox="0 0 19 18" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M6.50563 2.70388C6.8263 2.38321 7.34619 2.38321 7.66686 2.70388L13.1409 8.17794C13.4616 8.4986 13.4616 9.0185 13.1409 9.33916L7.66686 14.8132C7.34619 15.1339 6.8263 15.1339 6.50563 14.8132C6.18497 14.4926 6.18497 13.9727 6.50563 13.652L11.3991 8.75855L6.50563 3.8651C6.18497 3.54444 6.18497 3.02454 6.50563 2.70388Z" fill="#4E4E4E"/>
                        </svg>`,
                displayedPages: $(window).width() < 768 ? 1 : 3,
                onPageClick: function (pageNumber, event) {
                    window.location.href = "@Html.Raw(href)page=" + pageNumber;
                }
            })
        })
    </script>
    }
}